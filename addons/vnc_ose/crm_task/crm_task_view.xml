<?xml version="1.0"?>
<openerp>
    <data>
    
        <!-- CRM Fields History Views-->
        <record id="view_crm_field_historyl_tree" model="ir.ui.view">
            <field name="name">crm.fields.history.tree</field>
            <field name="model">crm.field.history</field>
            <field name="arch" type="xml">
                <tree string="Fields History">
                    <field name="value_after" />
                    <field name="value_before" />
                    <field name="user_id" />
                    <field name="create_date" />
                    <field name="field_name" />
                </tree>
            </field>
        </record>
        <record id="view_model_form" model="ir.ui.view">
            <field name="name">crm.fields.history.form</field>
            <field name="model">crm.field.history</field>
            <field name="arch" type="xml">
                <form string="Fields History" version="7.0">
                    <sheet>
                        <group>
                            <field name="value_after" />
                            <field name="value_before" />
                            <field name="user_id" />
                            <field name="create_date" />
                            <field name="field_name" />
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        
        <!-- CRM tasks Categories Form View -->
        <record id="crm_task_categ_action" model="ir.actions.act_window">
            <field name="name">Task Categories</field>
            <field name="res_model">crm.case.categ</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="crm.crm_case_categ_tree-view" />
            <field name="domain">[('object_id.model', '=', 'crm.task')]</field>
            <field name="context">{'object_id':'crm.task'}</field>
            <field name="help">Create different task categories to better organize and classify your tasks.</field>
        </record>
        <menuitem action="crm_task_categ_action" id="menu_crm_case_task-act"
            parent="calendar.menu_calendar_configuration" sequence="1" />
        <!-- CRM tasks Form View -->
        <record model="ir.ui.view" id="crm_case_form_view_meet">
            <field name="name">crm.task.form</field>
            <field name="model">crm.task</field>
            <field name="priority">2</field>
            <field name="arch" type="xml">
                <form string="Task" version="7.0">
                    <header>
                        <button name="case_close" string="Done" states="open" type="object"
                            icon="gtk-jump-to" />
                        <button name="case_reset" string="Reset to Unconfirmed"
                            states="open,done" type="object" icon="gtk-convert" />
                        <button name="case_open" string="Confirm" states="draft"
                            type="object" icon="gtk-go-forward" />
                        <field name="state" widget='statusbar' />
                    </header>
                    <sheet>
                        <group col="4">
                            <field name="name" select="1" string="Summary" required="1" />
                            <field name="categ_id" widget="selection" string="Task Type" groups="base.group_user" domain="[('object_id.model', '=', 'crm.task')]" />
                            <field name="priority" />
                            <field name="start_datetime" string="Start Date"
                                on_change="onchange_dates(start_datetime,duration,False,False)" required="1"/>
                            <field name="stop_datetime" string="End Date"
                                on_change="onchange_dates(start_datetime,False,stop_datetime,False)"/>
                            <field name="duration" invisible="1" widget="float_time"
                                on_change="onchange_dates(start_datetime,duration,False,False)" />
                            <field name="allday" invisible="1" />
                            <field name="task_type" invisible="1" />
                        </group>
                        <notebook>
                            <page string="Task">
                                <group col="2">
                                    <group>
                                        <separator string="Contacts" />
                                        <newline />
                                        <field name="partner_id" string="Partner"
                                            on_change="onchange_partner_id(partner_id)" />
                                        <field name="phone" />
                                        <field name="mobile" />
                                        <field name="email_from" />
                                        <field name="opportunity_id" />
                                    </group>
                                    <group>
                                        <separator string="Assignment" />
                                        <newline />
                                        <field name="user_delegated_id" />
                                        <field name="user_id" on_change="onchange_user_id(user_id)" />
                                        <field name="section_id" widget="selection" />
                                    </group>
                                </group>
                                <group>
                                    <separator string="Description" />
                                    <newline />
                                    <field name="description" nolabel="1" colspan="4" />
                                </group>
                            </page>
                            <page string="Extra Info">
                                <group>
                                    <field name="owner_changed" />
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
        <!-- CRM task Tree View -->
        <record model="ir.ui.view" id="crm_case_tree_view_meet">
            <field name="name">CRM - tasks Tree</field>
            <field name="model">crm.task</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Tasks"
                    colors="red:stop_datetime and (stop_datetime &lt;= current_datetime and state=='open')">
                    <field name="name" string="Subject" />
                    <field name="start_datetime" string="Start Date" />
                    <field name="duration" invisible="1" />
                    <field name="current_datetime" invisible="1" />
                    <field name="partner_id" />
                    <field name="phone" />
                    <field name="mobile" />
                    <field name="location" />
                    <field name="categ_id" string="task Type" />
                    <field name="state" />
                    <field name="user_id" invisible="1" />
                    <field name="stop_datetime" invisible="1" />
                    <button name="case_reset" string="Reset to Unconfirmed"
                        states="open,done" type="object" icon="gtk-convert" />
                    <button name="case_open" string="Confirm" states="draft"
                        type="object" icon="gtk-go-forward" />
                    <button name="case_close" string="Done" states="open" type="object"
                        icon="gtk-jump-to" />
                </tree>
            </field>
        </record>
        <!-- CRM task Calendar -->
        <record model="ir.ui.view" id="crm_case_calendar_view_meet">
            <field name="name">CRM - tasks Calendar</field>
            <field name="model">crm.task</field>
            <field name="type">calendar</field>
            <field name="priority" eval="2" />
            <field name="arch" type="xml">
                <calendar string="Tasks" date_start="start_datetime" color="user_id"
                    date_stop="stop_datetime">
                    <field name="name" />
                    <field name="partner_id" />
                    <field name="section_id" widget="selection" />
                </calendar>
            </field>
        </record>
        <!-- CRM task Gantt -->
        <record id="crm_case_gantt_view_meet" model="ir.ui.view">
            <field name="name">CRM - tasks Gantt</field>
            <field name="model">crm.task</field>
            <field name="type">gantt</field>
            <field name="arch" type="xml">
                <gantt color="user_id" date_delay="duration" date_start="start_datetime" string="Tasks">
                    <level object="crm.task" link="id" domain="[]">
                        <field name="name" />
                        <field name="partner_id" />
                    </level>
                </gantt>
            </field>
        </record>
        <!-- CRM task Search View -->
        <record id="view_crm_case_tasks_filter" model="ir.ui.view">
            <field name="name">CRM - tasks Search</field>
            <field name="model">crm.task</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Tasks">
                    <group col="12" colspan="4">
                        <filter icon="terp-check" name="current" string="Current"
                            domain="[('state','in',('draft', 'open'))]" help="Current tasks" />
                        <separator orientation="vertical" />
                        <field name="name" select="1" string="Subject" />
                        <field name="categ_id" select="1" string="task Type" widget="selection"
                            domain="[('object_id.model', '=', 'crm.task')]" />
                        <separator orientation="vertical" />
                        <field name="partner_id" select="1" />
                        <field name="section_id" select="1" widget="selection">
                            <filter icon="terp-personal+" help="My Sales Team(s)"
                                domain="['|', ('section_id.user_id','=',uid), ('section_id.member_ids', 'in', [uid])]" />
                        </field>
                        <field name="user_id" select="1" />
                        <field name="user_delegated_id" />
                    </group>
                    <newline />
                    <group expand="0" string="Group By...">
                        <filter string="Responsible" icon="terp-personal" domain="[]"
                            context="{'group_by':'user_id'}" />
                        <filter string="Partner" icon="terp-partner" domain="[]"
                            context="{'group_by':'partner_id'}" />
                        <separator orientation="vertical" />
                        <filter string="Type" help="task Type" icon="terp-stock_symbol-selection"
                            domain="[]" context="{'group_by':'categ_id'}" />
                        <filter string="State" icon="terp-stock_effects-object-colorize"
                            domain="[]" context="{'group_by':'state'}" />
                        <separator orientation="vertical" />
                        <filter string="Date" icon="terp-go-month" help="task date"
                            domain="[]" context="{'group_by':'start_datetime'}" />
                    </group>
                </search>
            </field>
        </record>
        <!-- Calendar Attendee Form View -->
        <record model="ir.ui.view" id="crm_case_form_view_notes">
            <field name="name">CRM - Task Form</field>
            <field name="model">crm.task</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Notes" version="7.0">
                    <header>
                        <field name="state" widget="statusbar" />
                    </header>
                    <sheet>
                        <group col="4">
                            <field name="name" select="1" string="Summary" required="1" />
                            <field name="start_datetime" string="Start Date"
                                on_change="onchange_dates(start_datetime,duration,False,allday)" />
                            <field name="stop_datetime" string="End Date"
                                on_change="onchange_dates(start_datetime,False,stop_datetime)" />
                            <field name="duration" invisible="1" widget="float_time"
                                on_change="onchange_dates(start_datetime,duration,False,allday)" />
                            <field name="allday" invisible="1" />
                            <field name="task_type" invisible="1" />
                            <newline />
                        </group>
                        <notebook colspan="4">
                            <page string="Notes">
                                <group col="6" colspan="4">
                                    <group col="2" colspan="2">
                                        <separator colspan="2" string="Contact Info" />
                                        <field name="first_name" />
                                        <field name="last_name" />
                                    </group>
                                    <group col="2" colspan="2">
                                        <separator colspan="2" string="Contacts" />
                                        <field name="partner_id" string="Partner"
                                            on_change="onchange_partner_id(partner_id)" />
                                        <field name="partner_address_id" domain="[('parent_id','=',partner_id)]" />
                                        <field name="opportunity_id" />
                                        <field name="meeting_id" />
                                    </group>
                                </group>
                                <separator string="Description" colspan="4" />
                                <field name="description" nolabel="1" colspan="4" />
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
        <!-- CRM task Tree View -->
        <record model="ir.ui.view" id="crm_case_tree_view_notes">
            <field name="name">CRM - tasks Tree</field>
            <field name="model">crm.task</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Notes">
                    <field name="create_date" readonly="1" />
                    <field name="name" string="Subject" />
                    <field name="partner_id" string="Partner" />
                    <field name="opportunity_id" />
                    <field name="file_name" />
                    <field name="state" />
                </tree>
            </field>
        </record>
        <record id="view_crm_case_notes_filter" model="ir.ui.view">
            <field name="name">CRM - tasks Search</field>
            <field name="model">crm.task</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Notes">
                    <group col="12" colspan="4">
                        <filter icon="terp-check" name="current" string="Current"
                            domain="[('state','in',('draft', 'open'))]" help="Current tasks" />
                        <separator orientation="vertical" />
                        <field name="name" select="1" string="Subject" />
                        <separator orientation="vertical" />
                        <field name="partner_id" select="1" />
                        <field name="opportunity_id" select="1" />
                        <separator orientation="vertical" />
                        <field name="first_name" />
                        <field name="first_name" />
                        <separator orientation="vertical" />
                        <field name="file_name" />
                        <field name="file_mime_type" />
                    </group>
                    <newline />
                    <group expand="0" string="Group By...">
                        <filter string="Partner" icon="terp-partner" domain="[]"
                            context="{'group_by':'partner_id'}" />
                    </group>
                </search>
            </field>
        </record>
    </data>
</openerp>
